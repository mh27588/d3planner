!function(){function a(a){var l=a.shift(),i=a[0];if(void 0===i&&(i=null),D[l]&&(D[l][i]=void 0),C[l])for(var e=0;e<C[l].length;++e)C[l][e].apply(null,a)}function l(){if(p=void 0,window.localStorage){var a=DiabloCalc.getAllProfiles();if(!function(a){try{if(1!==a.profiles.length)return!1;for(var l=a.profiles[0],i=0;i<l.skills.length;++i)if(l.skills[i])return!1;for(i=0;i<l.passives.length;++i)if(l.passives[i])return!1;return!(l.paragon.level||!$.isEmptyObject(l.items)||l.priority&&l.priority.length)}catch(a){return!1}}(a)){$(".restore-profile").remove();try{localStorage.setItem("profile",JSON.stringify(a))}catch(a){}}}}function i(a){return a<10?"0"+a:a.toString()}function e(a,l){if(a instanceof Array){if(!(l instanceof Array))return!1;if(a.length!==l.length)return!1;for(var i=0;i<a.length;++i)if(!e(a[i],l[i]))return!1}else{if("object"!=typeof a)return a===l;if("object"!=typeof l)return!1;for(var t in a)if(!e(a[t],l[t]))return!1;for(var t in l)if(!a.hasOwnProperty(t))return!1}return!0}function t(a){var l=[];if(void 0!==a.active&&l.push(a.active?1:0),a.params){for(var i=[],e=0;e<a.params.length;++e)void 0===a.params[e]._val?i.push(a.params[e].val):i.push(a.params[e]._val);l.push(i)}if(a.boxvals){for(var i=[],e=0;e<a.boxvals.length;++e)i.push(a.boxvals[e]?1:0);l.push(i)}else if(a.boxnames){for(var i=[],e=0;e<a.boxnames.length;++e)i.push(0);l.push(i)}if(a.runevals)if(a.multiple){i={};for(var t in a.runevals)i[t]=a.runevals[t]?1:0;l.push(i)}else l.push(a.runevals);else if(a.runelist&&("*"===a.runelist||a.runelist.length>1))if(a.multiple){i={};for(var t in a.runes)i[t]=0;l.push(i)}else l.push("*"===a.runelist?"x":a.runelist[0]);return l}function o(a,l){var i=l.slice();if(void 0!==a.active&&i.length&&(a.active=!!i.shift()),a.params&&i.length){if("object"==typeof(t=i.shift()))for(e=0;e<a.params.length&&e<t.length;++e)void 0===a.params[e]._val?a.params[e].val=t[e]:a.params[e]._val=t[e]}if(a.boxvals&&i.length){if("object"==typeof(t=i.shift()))for(var e=0;e<a.boxvals.length&&e<t.length;++e)a.boxvals[e]=!!t[e]}if(a.runevals&&i.length){var t=i.shift();if(a.multiple){if("object"==typeof t)for(var o in a.runevals)a.runevals[o]=!!t[o]}else"string"==typeof t&&(a.runevals=t)}}function s(a,l,i){if(i.params&&$.each(i.params,function(a,l){if(!l._done){if(l._done=!0,"string"==typeof l.step||"function"==typeof l.step){var e=l.step;Object.defineProperty(l,"step",{get:function(){var a=0;if(DiabloCalc.getStats){var l=DiabloCalc.getStats(!0);a="string"==typeof e?l.execString(e):e.call(i,l)}return a}})}if("string"==typeof l.inf||"function"==typeof l.inf){var t=l.inf;Object.defineProperty(l,"inf",{get:function(){var a=0;if(DiabloCalc.getStats){var l=DiabloCalc.getStats(!0);a="string"==typeof t?l.execString(t):e.call(t,l)}return!!a}})}if("string"==typeof l.min||"function"==typeof l.min||"string"==typeof l.max||"function"==typeof l.max?(void 0===l.val&&(l.val="max"),l._val=l.val,Object.defineProperty(l,"val",{get:function(){return null===l._val||"max"===l._val?l.max:"min"===l._val?l.min:Math.min(l.max,Math.max(l._val,l.min))},set:function(a){a<=l.min?l._val="min":a>=l.max&&!l.inf?l._val="max":l._val=a}})):void 0!==l.val&&"string"!=typeof l.val||(void 0===l.val||"max"===l.val?l.val=l.max:l.val=l.min),"string"==typeof l.min||"function"==typeof l.min){var o=l.min;Object.defineProperty(l,"min",{get:function(){var a=0;if(DiabloCalc.getStats){var e=DiabloCalc.getStats(!0);a="string"==typeof o?e.execString(o):o.call(i,e)}var t=l.step||1;return Math.ceil(a/t)*t}})}if("string"==typeof l.max||"function"==typeof l.max){s=l.max;Object.defineProperty(l,"max",{get:function(){var a=0;if(DiabloCalc.getStats){var e=DiabloCalc.getStats(!0);a="string"==typeof s?e.execString(s):s.call(i,e)}var t=l.step||1;if(a=Math.floor(a/t)*t,l.inf){var o=l.min,r=void 0===l._val?l.val:l._val;"max"!==r&&null!==r||(r=a),"min"===r&&(r=o);var c=1.33*(r-o)+o;return Math.max(a,Math.floor(c/t)*t)}return a}})}else if(l.inf){var s=l.max;Object.defineProperty(l,"max",{get:function(){return Math.max(s,Math.floor(1.33*l.val/(l.step||1))*(l.step||1))}})}"function"==typeof l.name&&Object.defineProperty(l,"name",{get:l.name})}}),i.boxnames){i.boxvals=[];for(var e=0;e<i.boxnames.length;++e)i.boxvals.push(!1)}if(i.runelist)if(i.multiple){var o={};for(var l in i.runes)o[l]=!1;i.runevals=o}else i.runevals="*"===i.runelist?"x":i.runelist[0];var s=t(i);s.length&&(v[a].objects[l]=i,v[a].defaults[l]=s)}function r(a,l,i){if(i>=l.length)return a;if("*"===l[i]){s={};for(var e in a){var t=r(a[e],l,i+1);void 0!==t&&(s[e]=t)}if(!$.isEmptyObject(s))return s}else if(void 0!==a[l[i]]){var o=r(a[l[i]],l,i+1);if(void 0!==o){var s;return(s={})[l[i]]=o,s}}}function c(a){if(a.format)return a.format;for(var l=[],i=0;i<(void 0===a.args?1:a.args);++i)l.push("%d");return"+"+l.join("-")+" "+a.name}function n(a,l){this.re=a,this.list=l}function f(a,l,i){var e=[],t=!1,o=!1;l=(l=(l=(l=(l=(l=l||c(a)).replace(/%(?:\{([0-9]+)\})?(d|\.[0-9]f|p)/g,function(a,l,i){return e.push(l?parseInt(l):void 0),l&&(t=!0),"p"===i&&(o=!0),"p"===i?"#":"@"})).replace(/%%/g,"%")).replace(/[$-.]|[[-^]|[?|{}]/g,"\\$&")).replace(/@/g,"([0-9,]+(?:\\.[0-9]+)?)")).replace(/#/g,"(.+)"),a.class||i?l+="(?: \\("+DiabloCalc.classes[a.class||i].name+" Only\\))?":o&&(l+="(?: \\(.* Only\\))?");var s=new RegExp("^"+l+"$","i");return t?new n(s,e):s}function b(){function a(a,l){for(var i in l)"object"==typeof l[i]?a[i]=l[i]:DiabloCalc.stats[i]&&DiabloCalc.stats[i].dr?a[i]=100*(1-(1-.01*(a[i]||0))*(1-.01*l[i])):a[i]=(a[i]||0)+l[i]}DiabloCalc.itemById={};for(j=0;j<DiabloCalc.items.length;++j)DiabloCalc.itemById[DiabloCalc.items[j].id]=DiabloCalc.items[j];for(j=0;j<DiabloCalc.potions.length;++j)Object.defineProperty(DiabloCalc.itemById,DiabloCalc.potions[j].id,{value:DiabloCalc.potions[j],enumerable:!1});for(j=0;j<DiabloCalc.extraItems.length;++j)Object.defineProperty(DiabloCalc.itemById,DiabloCalc.extraItems[j].id,{value:DiabloCalc.extraItems[j],enumerable:!1});for(var l in DiabloCalc.skills)if(DiabloCalc.classes[l])for(var e in DiabloCalc.skills[l]){var t=DiabloCalc.skills[l][e].name,o="skill_"+l+"_"+e;DiabloCalc.stats[o]={name:"{0} Damage".format(t),format:"Increases {0} Damage by %d%%".format(t),class:l,skill:t}}for(var l in DiabloCalc.passives)for(var e in DiabloCalc.passives[l])DiabloCalc.passives[l][e].origname=DiabloCalc.passives[l][e].name;for(var e in DiabloCalc.stats){(n=DiabloCalc.stats[e]).base||(n.regex=f(n))}for(j=0;j<DiabloCalc.items.length;++j){(p=DiabloCalc.items[j]).required&&p.required.custom&&(p.required.custom.regex=f(p.required.custom,void 0,DiabloCalc.itemPowerClasses[p.required.custom.id]))}_L.patch.apply(DiabloCalc);for(var l in DiabloCalc.skills)if(DiabloCalc.classes[l])for(var e in DiabloCalc.skills[l]){var t=DiabloCalc.skills[l][e].name,o="skill_"+l+"_"+e;(n=DiabloCalc.stats[o]).name=_L("{0} Damage").format(t),n.format=_L("Increases {0} Damage by %d%%").format(t),n.skill=t}DiabloCalc.sourceNames={gems:_L("Gems"),paragon:_L("Paragon"),dualwield:_L("Dual Wielding"),seasonal:_L("Seasonal Buff")};var r=0;for(var n in DiabloCalc.stats)DiabloCalc.stats[n].skill||(r+=10,DiabloCalc.stats[n].prio=r),DiabloCalc.sourceNames[n]=DiabloCalc.stats[n].name,DiabloCalc.stats[n].class&&(DiabloCalc.stats[n].classes=[DiabloCalc.stats[n].class]),void 0===DiabloCalc.stats[n].args&&(DiabloCalc.stats[n].args=1),DiabloCalc.stats[n].format||(DiabloCalc.stats[n].format=c(DiabloCalc.stats[n]));for(var n in DiabloCalc.stats)DiabloCalc.stats[n].skill&&(DiabloCalc.stats[n].prio=DiabloCalc.stats.skill_wizard_teleport_cooldown.prio-5);for(j=0;j<DiabloCalc.statExclusiveGroups.length;++j){var b=DiabloCalc.statExclusiveGroups[j];$.each(DiabloCalc.extendStats([],b),function(a,l){DiabloCalc.stats[l].group=b})}for(var C in DiabloCalc.itemSlots)DiabloCalc.itemSlots[C].types={},DiabloCalc.sourceNames[C]=DiabloCalc.itemSlots[C].name;for(var D in DiabloCalc.itemTypes){C=DiabloCalc.itemTypes[D].slot;if(DiabloCalc.metaSlots[C])for(j=0;j<DiabloCalc.metaSlots[C].slots.length;++j)DiabloCalc.itemSlots[DiabloCalc.metaSlots[C].slots[j]].types[D]=DiabloCalc.itemTypes[D];else DiabloCalc.itemSlots[DiabloCalc.itemTypes[D].slot].types[D]=DiabloCalc.itemTypes[D];DiabloCalc.itemTypes[D].class&&(DiabloCalc.itemTypes[D].classes=[DiabloCalc.itemTypes[D].class]),DiabloCalc.itemTypes[D].items=[]}for(var m in DiabloCalc.itemSets)DiabloCalc.itemSets[m].items=[],DiabloCalc.sourceNames[m]=DiabloCalc.itemSets[m].name;DiabloCalc.items.sort(function(a,l){if(a.quality!=l.quality)return a.quality.localeCompare(l.quality);var i=a.name.toLowerCase().replace(/^(?:the|a) /,""),e=l.name.toLowerCase().replace(/^(?:the|a) /,"");return i.localeCompare(e)});for(j=0;j<DiabloCalc.items.length;++j){var p=DiabloCalc.items[j];if(p.ids)for(var v=0;v<p.ids.length;++v)DiabloCalc.itemById[p.ids[v]]=p;if(DiabloCalc.itemTypes[p.type].items.push(p),DiabloCalc.sourceNames[p.id]=p.name,p.set){(m=DiabloCalc.itemSets[p.set]).items.push(p),m.class&&(p.class=m.class),m.classes&&(p.classes=m.classes)}p.class&&(p.classes=[p.class]),p.required&&p.required.custom&&(p.required.custom.nostack=!0)}for(var m in DiabloCalc.itemSets){var g=DiabloCalc.itemSets[m];DiabloCalc.sourceNames[m]=g.name,g.order&&g.items.sort(function(a,l){return g.order.indexOf(a.type)-g.order.indexOf(l.type)})}for(var D in DiabloCalc.itemTypes){var d={id:DiabloCalc.itemTypes[D].generic,name:DiabloCalc.GenderPair(DiabloCalc.qualities.rare.prefix,DiabloCalc.itemTypes[D].name),type:D,quality:"rare"};"custom"!=d.id&&"customwpn"!=d.id||(d.local=!0),DiabloCalc.items.push(d),DiabloCalc.itemById[d.id]=d,DiabloCalc.itemTypes[D].items.unshift(d)}DiabloCalc.gemById={};for(var D in DiabloCalc.gemColors){var y=DiabloCalc.gemColors[D];if(!y.names){y.names=[y.name];for(j=1;j<DiabloCalc.gemQualities.length;++j)y.names.push(DiabloCalc.gemQualities[j]+" "+y.name)}for(j=0;j<DiabloCalc.gemQualities.length;++j)DiabloCalc.gemById[y.id+i(j+1)]=[j,D];for(j=0;j<DiabloCalc.oldGemQualities.length;++j)DiabloCalc.gemById[y.oldid+i(j+1)]=[DiabloCalc.oldGemQualities[j],D]}var h=[];for(var D in DiabloCalc.legendaryGems){var x=DiabloCalc.legendaryGems[D];if(x.effects){if(DiabloCalc.gemById[x.id]=[D,0],DiabloCalc.sourceNames[D]=x.name,x.ids)for(j=0;j<x.ids.length;++j)DiabloCalc.gemById[x.ids[j]]=[D,0];for(j=0;j<x.effects.length;++j)x.effects[j].args=(x.effects[j].value||[]).length}else h.push(D)}for(j=0;j<h.length;++j)delete DiabloCalc.legendaryGems[h[j]];DiabloCalc.skillById={};for(var l in DiabloCalc.skills){var S={},P=DiabloCalc.skills[l];for(var t in P)S[P[t].id]=t;P=DiabloCalc.passives[l];for(var t in P)S[P[t].id]=t;DiabloCalc.skillById[l]=S}DiabloCalc.getSlotId=function(){},DiabloCalc.setSlot=function(){},DiabloCalc.getParagon=function(){};for(var e in DiabloCalc.legendaryGems)s("global",e,DiabloCalc.legendaryGems[e]);for(var e in DiabloCalc.itemaffixes)DiabloCalc.itemaffixes[e].clone?DiabloCalc.itemaffixes[e]=DiabloCalc.itemaffixes[DiabloCalc.itemaffixes[e].clone]:s("global",e,DiabloCalc.itemaffixes[e]);DiabloCalc.allSkills={};for(var l in DiabloCalc.skills)for(var e in DiabloCalc.skills[l])DiabloCalc.allSkills[e]=DiabloCalc.skills[l][e],DiabloCalc.sourceNames[e]=DiabloCalc.skills[l][e].name,s("global",e,DiabloCalc.skills[l][e]);DiabloCalc.allPassives={};for(var l in DiabloCalc.passives)for(var e in DiabloCalc.passives[l])DiabloCalc.allPassives[e]=DiabloCalc.passives[l][e],DiabloCalc.sourceNames[e]=DiabloCalc.passives[l][e].name,s("global",e,DiabloCalc.passives[l][e]);var _=DiabloCalc.locale("ui-skills.js");for(var l in DiabloCalc.classes)DiabloCalc.partybuffs[l]&&$.each(DiabloCalc.partybuffs[l],function(i,e){var t=DiabloCalc.skills[l][i]||DiabloCalc.passives[l][i];if(e.addpassive||(e.active=!1),e.charClass=l,e.id=i,e.runelist){if(e.type="skill",e.runes={},"*"===e.runelist)e.runes=$.extend({x:_("No Rune")},t.runes);else for(var o=0;o<e.runelist.length;++o)e.runes[e.runelist[o]]="x"===e.runelist[o]?_("No Rune"):t.runes[e.runelist[o]];if(e.buffs&&"function"==typeof e.buffs){if(!e.multiple){s=e.buffs;e.buffs=function(a){var l=this.runevals||this.runelist;return s.call(this,l,a)}}}else{var s=e.buffs||t.buffs,r=e.passive||t.passive,c=0,n=-1;s&&r?e.addpassive?(e.boxnames=["Passive","Active"],c=1,n=0):e.boxnames=["Activated"]:(r=s||r,s=void 0);var f=r,b=s;"object"==typeof r&&(f=function(a,l){return r[a]}),"object"==typeof s&&(b=function(a,l){return s[a]}),e.buffs=function(l){var i={};if(this.multiple)for(var e in this.runes)this.runevals[e]&&((n<0||!this.boxvals||this.boxvals[n])&&a(i,f.call(this,e,l)),s&&this.boxvals&&this.boxvals[c]&&a(i,b.call(this,e,l)));else{e=this.runevals||this.runelist;(n<0||!this.boxvals||this.boxvals[n])&&a(i,f.call(this,e,l)),s&&this.boxvals&&this.boxvals[c]&&a(i,b.call(this,e,l))}return i}}}else if(e.type="passive",!e.buffs||"function"!=typeof e.buffs){s=e.buffs||t.buffs;e.buffs="function"==typeof s?s:function(){return s}}});DiabloCalc.itemFromAffix={};for(var e in DiabloCalc.itemById)if(DiabloCalc.itemById[e].required&&DiabloCalc.itemById[e].required.custom){var k=DiabloCalc.itemById[e].required.custom;DiabloCalc.itemFromAffix[k.id]=DiabloCalc.itemById[e],DiabloCalc.partybuffs.items[k.id]&&(DiabloCalc.partybuffs.items[k.id].item=e,0!==k.args&&(DiabloCalc.partybuffs.items[k.id].params=[{min:k.min,max:k.max,name:"Amount"}]))}var I=DiabloCalc.partybuffs.items;DiabloCalc.partybuffs.items={},$.each(I,function(a,l){l.active=!1,l.id=a,DiabloCalc.legendaryGems[a]?(l.type="gem",DiabloCalc.partybuffs.items[a]=l,s("party","buff_"+a,l)):l.item&&(l.type="affix",l.stat?l.buffs=function(){var a={};return a[this.stat]=this.params[0].val,a}:"function"==typeof DiabloCalc.itemaffixes[a].buffs?l.buffs=DiabloCalc.itemaffixes[a].buffs:l.buffs=function(){return DiabloCalc.itemaffixes[a].buffs},DiabloCalc.partybuffs.items[l.item]=l)}),DiabloCalc._partybuffs=DiabloCalc.partybuffs,DiabloCalc.partybuffs=[];for(var j=0;j<3;++j){DiabloCalc.partybuffs.push($.extend(!0,{},DiabloCalc._partybuffs));for(var l in DiabloCalc.partybuffs[j])$.each(DiabloCalc.partybuffs[j][l],function(a,l){s("party","buff"+j+"_"+a,l)})}DiabloCalc.followerbuffs=DiabloCalc._partybuffs.followers,$.each(DiabloCalc.followerbuffs,function(a,l){l.active=!1,l.id=a,l.type="custom",DiabloCalc.sourceNames[a]=l.name,s("party",a,l)}),DiabloCalc.shrinebuffs=DiabloCalc._partybuffs.shrines,$.each(DiabloCalc.shrinebuffs,function(a,l){l.active=!1,l.id=a,l.type="custom",DiabloCalc.sourceNames[a]=l.name,s("party",a,l)}),u()}var u;DiabloCalc.GenderString=function(a,l){if(!a.length)return a;if("["==a[0]){var i=a.indexOf("]");i>=0&&(a=a.slice(i+1))}return!1!==l?a.charAt(0).toUpperCase()+a.slice(1):a},DiabloCalc.GenderPair=function(a,l,i){var e=function(a,l){if(!a.length||!l.length)return a+l;var i="ah";if((e=l.match(/\[([a-z]+)\]([^\[]+)/))&&(i=e[1],l=e[2]),"["!=a[0])return a+" "+l;for(var e,t=/\[([a-z]+)\]([^\[]+)/g,o={};e=t.exec(a);)o[e[1]]=e[2];if(!(i in o))for(var s in o){i=s;break}return(o[i]||"")+" "+l}(a,l);return!1!==i?e.charAt(0).toUpperCase()+e.slice(1):e};var C={},D={};DiabloCalc.register=function(a,l){C[a]||(C[a]=[]),C[a].push(l)},DiabloCalc.unregister=function(a,l){if(C[a])for(var i=0;i<C[a].length;++i)if(C[a][i]===l)return void C[a].splice(i,1)},DiabloCalc.importActive=1,DiabloCalc.trigger=function(l,i){if(!DiabloCalc.importActive&&(void 0===i&&(i=null),D[l]||(D[l]={}),!D[l][i])){var e=Array.prototype.slice.call(arguments);D[l][i]=setTimeout(a,0,e)}},DiabloCalc.triggerNow=function(){a(Array.prototype.slice.call(arguments))},DiabloCalc.importStart=function(){DiabloCalc.importActive++,DiabloCalc.spinStart()},DiabloCalc.importEnd=function(a,l){DiabloCalc.spinStop(),DiabloCalc.importActive--,DiabloCalc.trigger("importEnd",a,l)};var m={};DiabloCalc.register("updateSlotStats",function(a){m[a]=void 0}),DiabloCalc.register("updateSlotItem",function(a){m[a]=void 0,DiabloCalc.trigger("updateSlotStats",a)}),DiabloCalc.register("importEnd",function(){m={}}),DiabloCalc.getSlot=function(a){return DiabloCalc.importActive&&DiabloCalc.getSlotData?DiabloCalc.getSlotData(a):(void 0===m[a]&&DiabloCalc.getSlotData&&(m[a]=DiabloCalc.getSlotData(a)),m[a])};var p;window.onbeforeunload=function(a){p&&l()},DiabloCalc.register("updateStats",function(){p||(p=setTimeout(l,1e4))}),DiabloCalc.register("updatePriority",function(){p||(p=setTimeout(l,1e4))}),DiabloCalc.register("updateStatPriority",function(){p||(p=setTimeout(l,1e4))}),DiabloCalc.getStorage=function(a){var l;try{l=window.localStorage?localStorage.getItem(a):$.cookie(a)}catch(a){return}if(!l)return l;try{return JSON.parse(l)}catch(a){return l}},DiabloCalc.setStorage=function(a,l){try{l=JSON.stringify(l),window.localStorage?localStorage.setItem(a,l):$.cookie(a,l,{days:365})}catch(a){}},DiabloCalc.items=[],DiabloCalc.addItems=function(a){DiabloCalc.items=DiabloCalc.items.concat(a)},DiabloCalc.skills={},DiabloCalc.sourceNames={},DiabloCalc.getProfile=function(){var a=DiabloCalc.getSkills();a.paragon=DiabloCalc.getParagonLevels(),a.class=$(".char-class").val(),a.gender=DiabloCalc.gender||"female",a.items={};for(var l in DiabloCalc.itemSlots){var i=DiabloCalc.getSlot(l);i&&(a.items[l]=i)}a.active=DiabloCalc.getActive("party"),DiabloCalc.priority&&(a.priority=DiabloCalc.priority.getData()),DiabloCalc.Optimizer&&(a.statPriority=$.extend(!0,[],DiabloCalc.Optimizer.priority)),a.mainset="";var e=DiabloCalc.getStats();for(var t in DiabloCalc.itemSets)e["set_"+t+"_6pc"]&&(a.mainset=t);return a.buildinfo=DiabloCalc.buildinfo,a},DiabloCalc.getAllProfiles=DiabloCalc.getProfile,DiabloCalc.setProfile=function(a,l){if(DiabloCalc.importStart(),(a.class&&a.class!=$(".char-class")||a.gender&&a.gender!==(DiabloCalc.gender||"female"))&&(DiabloCalc.gender=a.gender,$(".char-class").val(a.class).change().trigger("chosen:updated")),a.items){for(var i in DiabloCalc.itemSlots)a.items[i]||DiabloCalc.setSlot(i,null);for(var i in a.items)DiabloCalc.setSlot(i,a.items[i])}DiabloCalc.setSkills(a),a.paragon&&DiabloCalc.setParagon(a.paragon),a.active&&DiabloCalc.setActive("party",a.active),DiabloCalc.priority&&a.priority&&DiabloCalc.priority.setData(a.priority),DiabloCalc.Optimizer&&a.statPriority&&(DiabloCalc.Optimizer.priority=a.statPriority,DiabloCalc.Optimizer.updatePriority()),DiabloCalc.buildinfo=a.buildinfo,DiabloCalc.importEnd(l,a.values)},DiabloCalc.setAllProfiles=DiabloCalc.setProfile,DiabloCalc.charClass=null,DiabloCalc.register("changeClass",function(){DiabloCalc.charClass=$(".char-class").val()}),DiabloCalc.getItemIcon=function(a,l){"string"!=typeof a&&(a=DiabloCalc.gemColors[a[1]].id+i(a[0]+1)),DiabloCalc.legendaryGems[a]&&(a=DiabloCalc.legendaryGems[a].id);var e=DiabloCalc.itemIcons[a],t=location.protocol+"//"+location.hostname+DiabloCalc.relPath+"webgl/icons/";if(e&&e[1]){if("number"==typeof e[1])return t+e[1];e=e[1];var o=DiabloCalc.classToIcon[DiabloCalc.charClass],s="male"===DiabloCalc.gender?0:1;return void 0!==e[o+s]?t+e[o+s]:void 0!==e[o]?t+e[o]:void 0!==e[s]?t+e[s]:t+e[0]}return DiabloCalc.itemById[a]&&DiabloCalc.itemById[a].icon?t+DiabloCalc.itemById[a].icon:""};var v={global:{objects:{},defaults:{}},party:{objects:{},defaults:{}}};DiabloCalc.getActive=function(a){var l=!1;"global+"===a&&(l=!0,a="global");var i={};if($.each(v[a].objects,function(l,o){var s=t(o);void 0===v[a].defaults[l]||e(s,v[a].defaults[l])||(i[l]=s)}),"party"===a){for(var o=0;o<DiabloCalc.partybuffs.length;++o)DiabloCalc.partybuffs[o].class&&(i["buff"+o]=DiabloCalc.partybuffs[o].class);for(var s in DiabloCalc.options)DiabloCalc.optionPerProfile[s]&&(i[s]=DiabloCalc.options[s])}else for(var s in DiabloCalc.options)DiabloCalc.optionPerProfile[s]&&!l||(i[s]=DiabloCalc.options[s]);return i},DiabloCalc.setActive=function(a,l){if($.each(v[a].objects,function(i,e){if("object"==typeof l[i])o(e,l[i]);else if(l.active&&void 0!==l.active[i]||l.params&&l.params[i]){var t=[];l.active&&void 0!==l.active[i]&&t.push(l.active[i]),l.params&&l.params[i]&&t.push(l.params[i]),o(e,t)}else void 0!==l[i]?o(e,[l[i]]):o(e,v[a].defaults[i])}),"party"===a){for(var i=0;i<DiabloCalc.partybuffs.length;++i)DiabloCalc.partybuffs[i].class=l["buff"+i];for(var e in DiabloCalc.options)DiabloCalc.optionPerProfile[e]&&void 0!==l[e]&&(DiabloCalc.options[e]=l[e])}else for(var e in DiabloCalc.options)DiabloCalc.optionPerProfile[e]||void 0!==l[e]&&(DiabloCalc.options[e]=l[e]);DiabloCalc.trigger("updateStats"),DiabloCalc.trigger("updateParams")},DiabloCalc.exportData=function(a){return r(this,a.split("."),0)},n.prototype.exec=function(a){for(var l=this.re.exec(a),i=[l[0]],e=0;e<this.list.length;++e)void 0===this.list[e]?i.push(l[e]):i[this.list[e]+1]=l[e];return i},DiabloCalc.getStatRegex=f,DiabloCalc.loadData=function(a){u=a,DiabloCalc.onLocaleLoaded=function(){DiabloCalc.onDataLoaded=b,DiabloCalc.translateMainPage(),DC_getScript("data.js")};var l=$.cookie("locale");DC_getScript("locale"+(l?"/"+l:""))}}();
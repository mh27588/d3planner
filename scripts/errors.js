!function(){function e(e){$.ajax({url:"report",data:JSON.stringify(e),type:"POST",global:!1,processData:!1,contentType:"application/json",dataType:"json",success:function(){},error:function(){}})}function t(t){if(!(0>=f||!t.file||t.file.indexOf("d3planner.com")<0&&t.file.indexOf("d3local.com")<0)){if(f-=1,l&&(t.event={type:l.type,which:l.which},l.target)){var n=l.target.attributes;if(n){for(var r="<"+l.target.nodeName.toLowerCase(),o=0;o<n.length;++o)r+=" "+n[o].name+'="'+n[o].value+'"';t.event.target=r+">"}else t.event.target=l.target.nodeName}try{t.profile=DiabloCalc.getAllProfiles()}catch(a){}try{t.userName=$.cookie("user_name")}catch(a){}t.userAgent=navigator.userAgent,e(t)}}function n(e){t({name:e.name,message:e.message||e.description,stacktrace:s(e)||u(),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line})}function r(e,t){return"function"!=typeof e?e:(e.errhandler||(e.errhandler=function(r){if(t&&(l=r,window.event||(window.event=r),r&&"touchstart"===r.type&&(window.touchEvent=r)),!d){var o=e.apply(this,arguments);return t&&r&&"touchstart"===r.type&&(window.touchEvent=void 0),o}try{var o=e.apply(this,arguments);return t&&r&&"touchstart"===r.type&&(window.touchEvent=void 0),o}catch(i){throw n(i),a(),i}},e.errhandler.errhandler=e.errhandler),e.errhandler)}function o(e,t,n){var r=e[t],o=n(r);e[t]=o}function a(){w+=1,window.setTimeout(function(){w-=1})}function i(e){return function(t,n){if("function"==typeof t){t=r(t);var o=Array.prototype.slice.call(arguments,2);return e(function(){t.apply(this,o)},n)}return e(t,n)}}function c(e){return function(t,n,o,a){return n&&n.handleEvent&&(n.handleEvent=r(n.handleEvent,!0)),e.call(this,t,r(n,!0),o,a)}}function u(){var e,t=10,n="[anonymous]";try{throw new Error("")}catch(r){e=s(r)}if(!e){for(var o=[],a=arguments.callee.caller.caller;a&&o.length<t;){var i=v.test(a.toString())?RegExp.$1||n:n;o.push(i),a=a.caller}e=o.join("\n")}return e}function s(e){return e.stack||e.backtrace||e.stacktrace}var l,d=!0,w=0,f=1;if(window.atob){if(window.ErrorEvent)try{0===new window.ErrorEvent("test").colno&&(d=!1)}catch(p){}}else d=!1;o(window,"onerror",function(e){return function(n,r,o,a,i){var c=!0;"Script error."===n&&""===r&&0===o&&(c=!1),!a&&window.event&&(a=window.event.errorCharacter),c&&!w&&t({name:i&&i.name||"window.onerror",message:n,file:r,lineNumber:o,columnNumber:a,stacktrace:i&&s(i)||u()}),e&&e(n,r,o,a,i)}}),o(window,"setTimeout",i),o(window,"setInterval",i),window.requestAnimationFrame&&o(window,"requestAnimationFrame",function(e){return function(t){return e(r(t))}}),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(o(t,"addEventListener",c),o(t,"removeEventListener",c))});var v=/function\s*([\w\-$]+)?\s*\(/i}();